
<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>后台配置 - OBS监控</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <div class="container">
        <h1>后台配置</h1>
        <p>所有配置将保存在服务器的 `config.json` 文件中。</p>
        
        <fieldset>
            <legend>全局配置</legend>
            <div class="grid-container">
                <div class="form-group">
                    <label for="obs-ak">华为云OBS AK:</label>
                    <input type="text" id="obs-ak" name="ak">
                </div>
                <div class="form-group">
                    <label for="obs-sk">华为云OBS SK:</label>
                    <input type="password" id="obs-sk" name="sk">
                </div>
                <div class="form-group">
                    <label for="obs-endpoint">华为云OBS Endpoint:</label>
                    <input type="text" id="obs-endpoint" name="endpoint">
                </div>
                 <div class="form-group">
                    <label for="wechat-corp-id">企业微信 CorpID:</label>
                    <input type="text" id="wechat-corp-id" name="corp_id">
                </div>
                <div class="form-group">
                    <label for="wechat-agent-id">企业微信 AgentID:</label>
                    <input type="text" id="wechat-agent-id" name="agent_id">
                </div>
                <div class="form-group">
                    <label for="wechat-secret">企业微信 Secret:</label>
                    <input type="password" id="wechat-secret" name="secret">
                </div>
                <div class="form-group">
                    <label for="wechat-touser">接收用户 ToUser:</label>
                    <input type="text" id="wechat-touser" name="touser">
                </div>
            </div>
        </fieldset>

        <fieldset>
            <legend>存储桶配置</legend>
            <table id="bucket-table">
                <thead>
                    <tr>
                        <th>存储桶名称</th>
                        <th>巡检计划</th>
                        <th>付费到期日</th>
                        <th>操作</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- JS动态生成 -->
                </tbody>
            </table>
            <button type="button" id="add-bucket-btn" class="secondary-btn">+ 添加新存储桶</button>
        </fieldset>

        <button id="save-btn">保 存 全 部 配 置</button>
        <p id="message"></p>
        <a href="/dashboard">前往监控面板</a>
    </div>

    <!-- 存储桶编辑/添加模态框 (子页面) -->
    <div id="bucket-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <h3 id="modal-title">编辑存储桶</h3>
            <input type="hidden" id="bucket-edit-index">
            <div class="form-group">
                <label for="bucket-name">存储桶名称:</label>
                <input type="text" id="bucket-name">
            </div>
            <div class="form-group">
                <label for="bucket-schedule">巡检计划:</label>
                <select id="bucket-schedule">
                    <option value="daily,1">每天 1 次</option>
                    <option value="daily,2">每天 2 次</option>
                    <option value="daily,3">每天 3 次</option>
                    <option value="hourly,1">每小时 1 次</option>
                </select>
            </div>
            <div class="form-group">
                <label for="bucket-payment-due-date">付费到期日:</label>
                <input type="date" id="bucket-payment-due-date">
            </div>
            <button id="save-bucket-btn">保存</button>
        </div>
    </div>

    <script src="/js/config.js"></script>
</body>
</html>
